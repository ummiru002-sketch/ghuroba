{% extends "base.html" %}

{% block content %}
<h2 class="mb-4 text-primary-custom">{{ t['pending_dues'] }}</h2>

{% if transactions %}
    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
            <thead>
                <tr>
                    <th>{{ t['date'] }}</th>
                    <th>{{ t['real_name'] }}</th>
                    <th>{{ t['amount'] }}</th>
                    <th>{{ t['description'] }}</th>
                    <th>{{ t['evidence'] }}</th>
                    <th>{{ t['actions'] }}</th>
                </tr>
            </thead>
            <tbody>
                {% for txn in transactions %}
                    <tr>
                        <td>{{ txn.date.strftime('%Y-%m-%d %H:%M') }}</td>
                        <td>{{ txn.user.real_name }}</td>
                        <td>{{ txn.amount }}</td>
                        <td>{{ txn.description }}</td>
                        <td>
                            {% if txn.slip_filename %}
                                <a href="{{ url_for('static', filename='uploads/' + txn.slip_filename) }}" target="_blank" class="btn btn-sm btn-outline-info">{{ t['view_slip'] }}</a>
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td>
                            <form method="POST">
                                <input type="hidden" name="txn_id" value="{{ txn.id }}">
                                <button type="submit" class="btn btn-success btn-sm">{{ t['approve'] }}</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="alert alert-info">No pending dues.</div>
{% endif %}
{% endblock %}
